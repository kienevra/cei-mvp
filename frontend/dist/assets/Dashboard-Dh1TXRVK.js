import{j as s,R as c,r as h,L as m}from"./index-DWKqlycP.js";import{u as o,g as x}from"./sites-DtG1IDw5.js";import{E as j}from"./ErrorBanner--am66j-U.js";import{P as p}from"./PageHeader-CbgFYcYC.js";import{R as v,L as g,C as b,X as u,Y as f,T as N,a as y}from"./LineChart-DScftfql.js";const i=({label:e,value:r})=>s.jsxs("div",{className:"bg-white rounded shadow p-4 flex flex-col items-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:r}),s.jsx("div",{className:"text-gray-500 text-sm",children:e})]}),R=()=>{const{data:e,loading:r,error:l}=o(()=>fetch("https://cei-mvp.onrender.com/api/v1/health").then(t=>t.json())),{data:a}=o(x),[d,n]=c.useState([]);return h.useEffect(()=>{a&&a.length>0&&fetch(`https://cei-mvp.onrender.com/api/v1/sites/${a[0].id}/metrics`).then(t=>t.json()).then(t=>n(t.metrics||[])).catch(()=>n([]))},[a]),s.jsxs("div",{children:[s.jsx(p,{title:"Dashboard"}),r&&s.jsx(m,{}),l&&s.jsx(j,{error:l}),e&&s.jsxs("div",{className:"mb-4",children:[s.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-2 ${e.status==="ok"?"bg-green-500":"bg-red-500"}`,"aria-label":e.status==="ok"?"Healthy":"Unhealthy"}),s.jsxs("span",{className:"text-sm",children:["API Health: ",e.status]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[s.jsx(i,{label:"Sites",value:a?.length??"-"}),s.jsx(i,{label:"Active Alerts",value:"TODO"}),s.jsx(i,{label:"Weekly Savings",value:"TODO"})]}),s.jsxs("div",{className:"bg-white rounded shadow p-4 mb-6",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Example Metrics"}),s.jsx(v,{width:"100%",height:220,children:s.jsxs(g,{data:d,children:[s.jsx(b,{strokeDasharray:"3 3"}),s.jsx(u,{dataKey:"timestamp"}),s.jsx(f,{}),s.jsx(N,{}),s.jsx(y,{type:"monotone",dataKey:"value",stroke:"#16a34a",dot:!1})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold mb-2",children:"Recent Events"}),s.jsx("div",{className:"bg-white rounded shadow p-4 text-gray-500",children:"No recent events."})]})]})};export{R as default};
